!function(e,t){var n=t;"undefined"!=typeof module&&module.exports?module.exports=n:e.vars=n}("undefined"!=typeof window?window:this,function(){var e,t,n;return function(i){function r(e,t){return E.call(e,t)}function s(e,t){var n,i,r,s,a,o,u,l,d,c,p,h=t&&t.split("/"),f=b.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,b.nodeIdCompat&&O.test(e[a])&&(e[a]=e[a].replace(O,"")),e=h.slice(0,h.length-1).concat(e),d=0;d<e.length;d+=1)if(p=e[d],"."===p)e.splice(d,1),d-=1;else if(".."===p){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||m)&&f){for(n=e.split("/"),d=n.length;d>0;d-=1){if(i=n.slice(0,d).join("/"),h)for(c=h.length;c>0;c-=1)if(r=f[h.slice(0,c).join("/")],r&&(r=r[i])){s=r,o=d;break}if(s)break;!u&&m&&m[i]&&(u=m[i],l=d)}!s&&u&&(s=u,o=l),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function a(e,t){return function(){var n=w.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),h.apply(i,n.concat([e,t]))}}function o(e){return function(t){return s(t,e)}}function u(e){return function(t){g[e]=t}}function l(e){if(r(y,e)){var t=y[e];delete y[e],v[e]=!0,p.apply(i,t)}if(!r(g,e)&&!r(v,e))throw new Error("No "+e);return g[e]}function d(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return b&&b.config&&b.config[e]||{}}}var p,h,f,m,g={},y={},b={},v={},E=Object.prototype.hasOwnProperty,w=[].slice,O=/\.js$/;f=function(e,t){var n,i=d(e),r=i[0];return e=i[1],r&&(r=s(r,t),n=l(r)),r?e=n&&n.normalize?n.normalize(e,o(t)):s(e,t):(e=s(e,t),i=d(e),r=i[0],e=i[1],r&&(n=l(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},m={require:function(e){return a(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:c(e)}}},p=function(e,t,n,s){var o,d,c,p,h,b,E=[],w=typeof n;if(s=s||e,"undefined"===w||"function"===w){for(t=!t.length&&n.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(p=f(t[h],s),d=p.f,"require"===d)E[h]=m.require(e);else if("exports"===d)E[h]=m.exports(e),b=!0;else if("module"===d)o=E[h]=m.module(e);else if(r(g,d)||r(y,d)||r(v,d))E[h]=l(d);else{if(!p.p)throw new Error(e+" missing "+d);p.p.load(p.n,a(s,!0),u(d),{}),E[h]=g[d]}c=n?n.apply(g[e],E):void 0,e&&(o&&o.exports!==i&&o.exports!==g[e]?g[e]=o.exports:c===i&&b||(g[e]=c))}else e&&(g[e]=n)},e=t=h=function(e,t,n,r,s){if("string"==typeof e)return m[e]?m[e](t):l(f(e,t).f);if(!e.splice){if(b=e,b.deps&&h(b.deps,b.callback),!t)return;t.splice?(e=t,t=n,n=null):e=i}return t=t||function(){},"function"==typeof n&&(n=r,r=s),r?p(i,e,t,n):setTimeout(function(){p(i,e,t,n)},4),h},h.config=function(e){return h(e)},e._defined=g,n=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(g,e)||r(y,e)||(y[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("enums/DirtyType",{NONE:0,POSITION:1,SIZE:2,LAYOUT:4,STATE:8,DATA:16,LOCALE:32,DEPTH:64,CONFIG:128,STYLE:256,CUSTOM:512,ALL:4294967295}),n("enums",["enums/DirtyType"],function(e){var t=function(e){return e};return Object.defineProperty(t,"DirtyType",{value:e,writable:!1,enumerable:!0}),t}),n("utils/assert",[],function(){function e(e,t){if(!e&&window&&window.vars&&window.vars.debug)throw"Error: "+t||"[vars]: Assertion failed.";return e}return e}),n("utils/log",[],function(){function e(){window&&window.vars&&window.vars.debug&&window.console&&console.log&&Function.apply.call(console.log,console,arguments)}return e}),n("events/EventDispatcher",["utils/assert","utils/log"],function(e,t){function n(){}return n.prototype.addEventListener=function(n,i){e(n,"Event type must be specified."),e(i,"Listener must be specified."),n&&i&&(t("[EventDispatcher]::addEventListener("+n+")"),this._listenerMap||Object.defineProperty(this,"_listenerMap",{value:{},writable:!0}),this._listenerMap[n]||(this._listenerMap[n]=[]),this._listenerMap[n].push(i))},n.prototype.removeEventListener=function(n,i){if(e(n,"Event type must be specified."),e(this._listenerMap,"Listener map is null."),e(this._listenerMap[n],"There are no listeners registered for event type: "+n),n&&this._listenerMap&&this._listenerMap[n])if(t("[EventDispatcher]::removeEventListener("+n+")"),i){var r=this._listenerMap[n].indexOf(i);r>-1&&this._listenerMap[n].splice(r,1)}else delete this._listenerMap[n]},n.prototype.hasEventListener=function(t,n){if(e(t,"Event type must be specified."),e(this._listenerMap,"Listener map is null."),e(this._listenerMap[t],"There are no listeners registered for event type: "+t),!t)return!1;if(!this._listenerMap)return!1;if(!this._listenerMap[t])return!1;if(n){var i=this._listenerMap[t].indexOf(n);return i>-1}return!0},n.prototype.dispatchEvent=function(n){if(e(n,"Event must be specified."),e(this._listenerMap,"Listener map is null."),n){if(!this._listenerMap)return!1;if(!this._listenerMap[n.type])return!1;t("[EventDispatcher]::dispatchEvent("+n.type+")"),n.target=this,n.currentTarget=this,n.customTarget=this;for(var i=this._listenerMap[n.type].length,r=0;i>r;r++){var s=this._listenerMap[n.type][r];s.call(this,n)}}},n}),n("events/EventType",{MOUSE:{CLICK:"click",CONTEXT_MENU:"contextmenu",DOUBLE_CLICK:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_UP:"mouseup"},KEYBOARD:{KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup"},OBJECT:{ABORT:"abort",BEFORE_UNLOAD:"beforeunload",ERROR:"error",HASH_CHANGE:"hashchange",LOAD:"load",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",PROGRESS:"progress"},FORM:{BLUR:"blur",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",INPUT:"input",INVALID:"invalid",RESET:"reset",SEARCH:"search",SELECT:"select",SUBMIT:"submit"},DRAG:{DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DRAG_START:"dragstart",DROP:"drop"},CLIPBOARD:{COPY:"copy",CUT:"cut",PASTE:"paste"},PRINT:{AFTER_PRINT:"afterprint",BEFORE_PRINT:"beforeprint"},MEDIA:{ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"},ANIMATION:{ANIMATION_END:"animationend",ANIMATION_ITERATION:"animationiteration",ANIMATION_START:"animationstart"},TRANSITION:{TRANSITION_END:"transitionend"},SERVER_SENT:{ERROR:"error",MESSAGE:"message",OPEN:"open"},MISC:{MESSAGE:"message",ONLINE:"online",OFFLINE:"offline",POP_STATE:"popstate",SHOW:"show",STORAGE:"storage",TOGGLE:"toggle",WHEEL:"wheel"},TOUCH:{TOUCH_CANCEL:"touchcancel",TOUCH_END:"touchend",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart"}}),n("events",["events/EventDispatcher","events/EventType"],function(e,t){var n=function(e){return e};return Object.defineProperty(n,"EventDispatcher",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(n,"EventType",{value:t,writable:!1,enumerable:!0}),n}),n("math/clamp",[],function(){function e(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)return 0/0;var i=e;return i=Math.min(i,n),i=Math.max(i,t)}return e}),n("math/isClamped",[],function(){function e(e,t,n,i){return i?e>t&&n>e:e>=t&&n>=e}return e}),n("math",["math/clamp","math/isClamped"],function(e,t){var n=function(e){return e};return Object.defineProperty(n,"clamp",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(n,"isClamped",{value:t,writable:!1,enumerable:!0}),n}),n("utils/keyOfValue",[],function(){function e(e,t){if(!e||!t)return null;if("object"!=typeof e)return null;for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n;return null}return e}),n("utils/sizeOf",[],function(){function e(e){if(void 0===e||null===e)return 0;if(void 0!==e.length)return e.length;var t=0;switch(typeof e){case"object":if(null!==e&&void 0!==e)for(var n in e)t++;break;case"number":t=(""+e).length;break;default:t=0}return t}return e}),n("utils/debounce",[],function(){function e(e,t,n){var i;return function(){var r=this,s=arguments,a=function(){i=null,n||e.apply(r,s)},o=n&&!i;clearTimeout(i),i=setTimeout(a,t),o&&e.apply(r,s)}}return e}),n("ui/ElementUpdateDelegate",["utils/assert","utils/debounce","utils/log","enums/DirtyType"],function(e,t,n,i){function r(e){this.debug&&n("[ElementUpdateDelegate]::new(",e,")");var r=0,s=null,a=null;this.delegate=e,this.setDirty=function(e,t){if(this.debug&&n("[ElementUpdateDelegate]::setDirty(",e,t,")"),this.transmissive!==i.NONE&&this.delegate.children)for(var s in this.delegate.children){var a=this.delegate.children[s];if(a.updateDelegate&&a.updateDelegate.setDirty){var u=e&a.updateDelegate.receptive;u!==i.NONE&&a.updateDelegate.setDirty(u,t)}}if(!this.isDirty(e)||t){switch(e){case i.NONE:case i.ALL:r=e;break;default:r|=e}t?this.update():this._pendingAnimationFrame||(this._pendingAnimationFrame=o(this.update.bind(this)))}},this.isDirty=function(e){switch(this.debug&&n("[ElementUpdateDelegate]::isDirty(",e,r,")"),e){case i.NONE:case i.ALL:return r==e;default:return 0!==(e&r)}},this.init=function(){this.debug&&n("[ElementUpdateDelegate]::init()");var e=this.conductor||window;window&&e&&e.addEventListener&&this.responsive&&(0===this.refreshRate?(s=l.bind(this),a=d.bind(this)):(s=t(l.bind(this),this.refreshRate),a=t(d.bind(this),this.refreshRate)),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),e.addEventListener("scroll",a)),this.setDirty(i.ALL)},this.destroy=function(){this.debug&&n("[ElementUpdateDelegate]::destroy()"),u();var e=this.conductor||window;window&&e&&e.removeEventListener&&this.responsive&&(window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s),e.removeEventListener("scroll",a)),s=null,a=null},this.update=function(){this.debug&&n("[ElementUpdateDelegate]::update()"),u(this._pendingAnimationFrame),this.delegate&&this.delegate.update&&this.delegate.update.call(this.delegate),this.setDirty(0),this._pendingAnimationFrame=null};var o=function(e){var t=window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)||null;return t||(t=function(e){return window?window.setTimeout(e,10):null}),t(e)},u=function(){var e=window&&(window.requestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)||null;return e||(e=function(e){return window?window.clearTimeout(e):null}),e},l=function(){this.setDirty(i.SIZE)},d=function(){this.setDirty(i.POSITION)}}var s=0;return Object.defineProperty(r.prototype,"debug",{value:!1,writable:!0}),Object.defineProperty(r.prototype,"delegate",{value:null,writable:!0}),Object.defineProperty(r.prototype,"responsive",{value:!1,writable:!0}),Object.defineProperty(r.prototype,"refreshRate",{value:s,writable:!0}),Object.defineProperty(r.prototype,"transmissive",{value:i.NONE,writable:!0}),Object.defineProperty(r.prototype,"receptive",{value:i.NONE,writable:!0}),Object.defineProperty(r.prototype,"conductor",{value:window,writable:!0}),r.prototype.toString=function(){return"[ElementUpdateDelegate{"+(this.delegate&&this.delegate.name||"undefined")+"}]"},r}),n("ui/Element",["utils/assert","utils/log","utils/keyOfValue","utils/sizeOf","enums/DirtyType","ui/ElementUpdateDelegate"],function(e,t,n,i,r,s){function a(e){if(Object.defineProperty(this,"element",{get:function(){return this._element||Object.defineProperty(this,"_element",{value:this.factory(),writable:!0}),this._element},set:function(e){this.__set_element(e)}}),Object.defineProperty(this,"id",{get:function(){return this.element.id},set:function(e){this.element.setAttribute("id",e)}}),Object.defineProperty(this,"name",{value:null,writable:!0}),Object.defineProperty(this,"class",{get:function(){return this.element.className},set:function(e){this.element.className=e}}),Object.defineProperty(this,"classList",{get:function(){return this.element.classList},set:function(e){this.element.classList=e}}),Object.defineProperty(this,"children",{value:{},writable:!1}),Object.defineProperty(this,"data",{get:function(){return this._data},set:function(e){Object.defineProperty(this,"_data",{value:e,writable:!0}),this.updateDelegate.setDirty(r.DATA)}}),Object.defineProperty(this,"updateDelegate",{get:function(){return this._updateDelegate||Object.defineProperty(this,"_updateDelegate",{value:new s(this),writable:!1}),this._updateDelegate}}),e)if(e instanceof HTMLElement)this.element=e;else if(e instanceof a)this.element=e.element;else if("object"==typeof e)for(var n in e)if(this.hasOwnProperty(n))if("children"===n){var i=e.children;for(var o in i)this.addChild(i[o],o)}else this[n]=e[n];t(this.toString()+":new(",e,")"),this.init()}return a.prototype.init=function(){t(this.toString()+"::init()"),this.updateDelegate.init()},a.prototype.destroy=function(){t(this.toString()+"::destroy()"),this.updateDelegate.destroy()},a.prototype.update=function(){t(this.toString()+"::update()")},a.prototype.addChild=function(t,n){return e(t instanceof a,"Child must conform to VARS Element.")?(n=n||t.name,e(n||t.name,"Child name must be provided.")&&e(!this.children[n],"Child name is already taken.")?(this.children[n]=t,t.name=n,t):null):null},a.prototype.removeChild=function(t){if(!e(t,"Child is null."))return null;if(!e(t instanceof a,"Child must conform to VARS Element."))return null;var i=n(this.children,t);return i&&delete this.children[i],t},a.prototype.removeChildByName=function(t){if(!e(t,"Name is null."))return null;var n=this.children[t];return n&&delete this.children[t],n},a.prototype.factory=function(){return document.createElement("div")},a.prototype.toString=function(){return"[Element{"+this.name+"}]"},a.prototype.__set_element=function(t){e(!this._element,"Element cannot be overwritten."),e(t instanceof HTMLElement||t instanceof a,"Invalid element type specified. Must be an instance of HTMLElement or Element."),t instanceof a?Object.defineProperty(this,"_element",{value:t.element,writable:!0}):Object.defineProperty(this,"_element",{value:t,writable:!0})},a}),n("ui/changeElementState",["ui/Element","utils/assert"],function(e,t){function n(n,i){t(n&&(n instanceof HTMLElement||n instanceof e),"Invalid element specified. Element must be an instance of HTMLElement")&&(n instanceof e&&(n=n.element),n.classList.contains("state"+i)||(n.className=n.className.replace(/(^|\s)state-\S+/g,""),n.classList.add("state-"+i)))}return n}),n("ui/getClassIndex",["ui/Element","utils/assert"],function(e,t){function n(n,i){if(!t(n&&(n instanceof HTMLElement||n instanceof e),"Invalid element specified. Element must be an instance of HTMLElement or Element."))return null;if(n instanceof e&&(n=n.element),!t(i&&"string"==typeof i,"Invalid class name: "+i))return null;if(!n.className)return-1;var r=n.className.split(" ");return r.indexOf(i)}return n}),n("ui/Directives",{Controller:"vs-controller",Instance:"vs-instance"}),n("utils/inherit",[],function(){function e(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return n.prototype=Object.create(t.prototype),e.prototype=new n,e.__super__=t.prototype,e}return e}),n("ui/Video",["utils/assert","utils/log","utils/inherit","enums/DirtyType","ui/Element"],function(e,t,n,i,r){function s(){Object.defineProperty(this,"autoplay",{get:function(){return this.element.autoplay},set:function(e){this.element.autoplay=e,this.updateDelegate.setDirty(i.CUSTOM)}}),Object.defineProperty(this,"controls",{get:function(){return this.element.controls},set:function(e){this.element.controls=e,this.updateDelegate.setDirty(i.CUSTOM)}}),Object.defineProperty(this,"loop",{get:function(){return this.element.loop},set:function(e){this.element.loop=e,this.updateDelegate.setDirty(i.CUSTOM)}}),Object.defineProperty(this,"muted",{get:function(){return this.element.muted},set:function(e){this.element.muted=e,this.updateDelegate.setDirty(i.CUSTOM)}}),Object.defineProperty(this,"poster",{get:function(){return this.element.poster},set:function(e){this.element.poster=e,this.updateDelegate.setDirty(i.CUSTOM)}}),Object.defineProperty(this,"preload",{get:function(){return this.element.preload},set:function(e){this.element.preload=e,this.updateDelegate.setDirty(i.CUSTOM)}}),Object.defineProperty(this,"source",{get:function(){return this._source},set:function(e){Object.defineProperty(this,"_source",{value:e,writable:!0}),this.updateDelegate.setDirty(i.DATA)}}),s.__super__.constructor.apply(this,arguments)}return n(s,r),s.PRELOAD={AUTO:"auto",METADATA:"metada",NONE:"none"},s.prototype.update=function(){this.updateDelegate.isDirty(i.DATA)&&this._updateSource(),this.updateDelegate.isDirty(i.CUSTOM),s.__super__.update.call(this)},s.prototype.factory=function(){return document.createElement("video")},s.prototype._updateSource=function(){var e,t,n=this.element.getElementsByTagName("source");for(t=n.length,e=0;t>e;e++){var i=n[e];this.element.removeChild(i)}if(this.source)for(t=this.source.length,e=0;t>e;e++){var r=document.createElement("source"),s=this.source[e].src,a=this.source[e].type,o=s.split(".").pop();r.setAttribute("src",s),r.setAttribute("type",a||"video/"+o),this.element.appendChild(r)}},s.prototype.toString=function(){return"[Video{"+this.name+"}]"},s.prototype.__set_element=function(t){e(t instanceof HTMLVideoElement,"Invalid element type specified. Must be an instance of HTMLVideoElement."),s.__super__.__set_element.call(this,t)},s}),n("utils/namespace",["utils/assert"],function(e){function t(t,n){if(!e("string"==typeof t,"Invalid identifiers specified."))return null;if(!e("undefined"==typeof n||"object"==typeof n,"Invalid scope specified."))return null;for(var i=t.split("."),r=void 0===n||null===n?window:n,s=0;s<i.length;s++)r=r[i[s]]||(r[i[s]]={});return r}return t}),n("utils/ready",[],function(){function e(e){if(!document)return null;var t=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",t,!1),window.removeEventListener("load",t,!1)):document.attachEvent&&(document.detachEvent("onreadystatechange",t),window.detachEvent("onload",t)),setTimeout(e,1)};return"complete"===document.readyState?setTimeout(e,1):(document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t)),null)}return e}),n("ui/getChildElements",["ui/Directives","ui/Element","ui/Video","utils/assert","utils/namespace","utils/ready","utils/sizeOf"],function(e,t,n,i,r,s,a){function o(n,s){var u=null;if(n||(n=document),!i(n instanceof HTMLElement||n instanceof t||document&&n===document,"Element must be an instance of an HTMLElement or the DOM itself."))return null;if(n instanceof t&&(n=n.element),!i(n.querySelectorAll,'Element does not support "querySelectorAll".'))return null;for(var l=n.querySelectorAll("["+e.Controller+"], [data-"+e.Controller+"], ["+e.Instance+"], [data-"+e.Instance+"]"),d=a(l),c=0;d>c;c++){var p=l[c],h=p.getAttribute(e.Controller),f=p.getAttribute(e.Instance),m=h?r(h,s):null;if(!m&&a(f)>0)m=vars.Element;else if("function"!=typeof m)switch(h){case"Video":m=vars.Video;break;case"Element":m=vars.Element;break;default:m=null}for(var g=!1,y=0;d>y;y++)if(y!==c){var b=l[y];if(b.contains&&b.contains(p)){g=!0;break}}if(!g&&i("function"==typeof m,'Class "'+h+'" is not found in specified controllerScope '+(s||window)+".")){var v=new m({element:p,name:f,children:o(p,s)});if(a(f)>0){if(u||(u={}),!i(!u[f],'Repeated child name "'+f+'".'))continue;u[f]=v}}}return u}return o}),n("ui/getElementState",["utils/assert","utils/sizeOf"],function(e,t){function n(n){if(!e(n&&n instanceof HTMLElement,"Invalid element specified. Element must be an instance of HTMLElement"))return null;var i=n.className.match(/(^|\s)state-\S+/g),r=t(i);return e(1>=r,"Multiple states detected.")?1>r?null:i[0].replace(/\sstate-/,""):null}return n}),n("ui/getViewportRect",["utils/assert"],function(e){function t(){if(!e(window&&document,"Window or document undefined."))return null;var t={};return t.width=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t.height=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t.top=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,t.left=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t.bottom=t.top+t.height,t.right=t.left+t.width,t}return t}),n("ui/getRect",["utils/assert","ui/getViewportRect","ui/Element"],function(e,t,n){function i(i){if(!e(i,"Invalid element specified."))return null;if(!e(window,"Window undefined."))return null;if(i instanceof n&&(i=i.element),i===window)return t();var r=t(),s={};return s.width=i.outerWidth?i.outerWidth():i.getBoundingClientRect().width,s.height=i.outerHeight?i.outerHeight():i.getBoundingClientRect().height,s.top=i.offset?i.offset().top:i.getBoundingClientRect().top+r.top,s.left=i.offset?i.offset().left:i.getBoundingClientRect().left+r.left,s.bottom=s.top+s.height,s.right=s.left+s.width,s}return i}),n("ui/getIntersectRect",["ui/Element","utils/assert","ui/getRect"],function(e,t,n){function i(i,r){if(!t(i||r,"Invalid elements specified."))return null;if(!t(window,"Window undefined."))return null;i instanceof e&&(i=i.element),r instanceof e&&(r=r.element);var s=n(i||window),a=n(r||window);if(!s||!a)return null;var o={};return o.width=Math.max(0,Math.min(s.right,a.right)-Math.max(s.left,a.left)),o.height=Math.max(0,Math.min(s.bottom,a.bottom)-Math.max(s.top,a.top)),o.top=Math.max(s.top,a.top),o.left=Math.max(s.left,a.left),o.bottom=o.top+o.height,o.right=o.left+o.width,o.width*o.height===0&&(o.width=0,o.height=0,o.top=0,o.left=0,o.bottom=0,o.right=0),o}return i}),n("ui/initDOM",["ui/getChildElements","utils/ready"],function(e,t){function n(n){t(function(){e(document,n)})}return n}),n("ui/transform",["utils/assert"],function(e){function t(t,n,i){if(n){if(!e(!n.width||!isNaN(n.width),"Width property must be a number."))return null;if(!e(!n.height||!isNaN(n.height),"Height property must be a number."))return null;if(!e(!n.aspectRatio||!isNaN(n.aspectRatio),"Aspect ratio property must be a number."))return null;var r=n.units||"px",s=n.aspectRatio?Number(n.aspectRatio):n.width/n.height,a=n.width,o=n.height,u=n.width,l=n.height,d=n.type||"default";i&&"default"!==d&&(e(!i.width||!isNaN(i.width),"Width constraint must be a number."),e(!i.height||!isNaN(i.height),"Height constraint must be a number."),d&&"cover"===d?(i.width&&(u=Math.min(i.width,u)),i.width&&(l=Math.min(i.height,l))):(i.width&&(a=Math.min(i.width,a)),i.height&&(o=Math.min(i.height,o))));var c,p;return"contain"===d?(c=a>o?o*s:a,p=a>o?o:a/s,c>a?(c=a,p=c/s):p>o&&(p=o,c=p*s)):"cover"==d?(c=u>l?l*s:u,p=u>l?l:u/s,u>c?(c=u,p=c/s):l>p&&(p=l,c=p*s)):(c=a,p=o),t&&(t.style?(n.width&&(t.style.width=String(c)+r),n.height&&(t.style.height=String(p)+r)):t.css&&(n.width&&t.css({width:String(c)+r}),n.height&&t.css({height:String(p)+r}))),{width:c,height:p}}return t&&(t.style?(t.style.width="initial",t.style.height="initial"):t.css&&(t.css({width:"initial"}),t.css({height:"initial"}))),{width:"initial",height:"initial"}}return t}),n("ui/translate",["utils/assert"],function(e){function t(t,n,i){if(n){if(!e(!n.top||!isNaN(n.top),"Top property must be a number."))return null;if(!e(!n.right||!isNaN(n.right),"Right property must be a number."))return null;if(!e(!n.bottom||!isNaN(n.bottom),"Bottom property must be a number."))return null;if(!e(!n.left||!isNaN(n.left),"Left property must be a number."))return null;var r=n.units||"px";if(i){if(!e(!i.top||!isNaN(i.top),"Top constraint must be a number."))return null;if(!e(!i.right||!isNaN(i.right),"Right constraint must be a number."))return null;if(!e(!i.bottom||!isNaN(i.bottom),"Bottom constraint must be a number."))return null;if(!e(!i.left||!isNaN(i.left),"Left constraint must be a number."))return null}var s=i&&i.top?Math.min(n.top,i.top):n.top,a=i&&i.right?Math.min(n.right,i.right):n.right,o=i&&i.bottom?Math.min(n.bottom,i.bottom):n.bottom,u=i&&i.left?Math.min(n.left,i.left):n.left;return t&&(t.style?(t.style.top=String(s)+r,t.style.right=String(a)+r,t.style.bottom=String(o)+r,t.style.left=String(u)+r):t.css&&(t.css({top:String(s)+r}),t.css({right:String(a)+r}),t.css({bottom:String(o)+r}),t.css({left:String(u)+r}))),{top:s,right:a,bottom:o,left:u}}return t&&(t.style?(t.style.top="initial",t.style.right="initial",t.style.bottom="initial",t.style.left="initial"):t.css&&(t.css({top:"initial"}),t.css({right:"initial"}),t.css({bottom:"initial"}),t.css({left:"initial"}))),{top:"initial",right:"initial",bottom:"initial",left:"initial"}}return t}),n("ui/translate3d",["utils/assert"],function(e){function t(t,n,i){if(n){if(!e(!n.x||!isNaN(n.x),"X property must be a number."))return null;if(!e(!n.y||!isNaN(n.y),"Y property must be a number."))return null;if(!e(!n.z||!isNaN(n.z),"Z property must be a number."))return null;var r=n.units||"px";if(i){if(!e(!i.x||!isNaN(i.x),"X constraint must be a number."))return null;if(!e(!i.y||!isNaN(i.y),"Y constraint must be a number."))return null;if(!e(!i.z||!isNaN(i.z),"Z constraint must be a number."))return null}var s=i&&i.x?Math.min(n.x,i.x):n.x,a=i&&i.y?Math.min(n.y,i.y):n.y,o=i&&i.z?Math.min(n.z,i.z):n.z;if(t){var u=n.x?"translateX("+s+r+")":null,l=n.y?"translateY("+a+r+")":null,d=n.z?"translateZ("+o+r+")":null,c="";u&&(c+=""===c?u:" "+u),l&&(c+=""===c?l:" "+l),d&&(c+=""===c?d:" "+d),t.style?t.style.transform=c:t.css&&t.css("transform",c)}return{x:s,y:a,z:o}}return t&&(t.style?t.style.transform="translateX(0) translateY(0) translateZ(0)":t.css&&t.css({transform:"translateX(0) translateY(0) translateZ(0)"})),{x:0,y:0,z:0}}return t}),n("ui",["ui/changeElementState","ui/getClassIndex","ui/getChildElements","ui/getElementState","ui/getIntersectRect","ui/getRect","ui/getViewportRect","ui/initDOM","ui/transform","ui/translate","ui/translate3d","ui/Directives","ui/Element","ui/ElementUpdateDelegate","ui/Video"],function(e,t,n,i,r,s,a,o,u,l,d,c,p,h,f){var m=function(e){return e};return Object.defineProperty(m,"changeElementState",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(m,"getClassIndex",{value:t,writable:!1,enumerable:!0}),Object.defineProperty(m,"getChildElements",{value:n,writable:!1,enumerable:!0}),Object.defineProperty(m,"getElementState",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(m,"getIntersectRect",{value:r,writable:!1,enumerable:!0}),Object.defineProperty(m,"getRect",{value:s,writable:!1,enumerable:!0}),Object.defineProperty(m,"getViewportRect",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(m,"initDOM",{value:o,writable:!1,enumerable:!0}),Object.defineProperty(m,"translate",{value:l,writable:!1,enumerable:!0}),Object.defineProperty(m,"translate3d",{value:d,writable:!1,enumerable:!0}),Object.defineProperty(m,"transform",{value:u,writable:!1,enumerable:!0}),Object.defineProperty(m,"Directives",{value:c,writable:!1,enumerable:!0}),Object.defineProperty(m,"Element",{value:p,writable:!1,enumerable:!0}),Object.defineProperty(m,"ElementUpdateDelegate",{value:h,writable:!1,enumerable:!0}),Object.defineProperty(m,"Video",{value:f,writable:!1,enumerable:!0}),m}),n("utils/isNull",[],function(){function e(e){return void 0===e||null===e?!0:!1}return e}),n("utils/module",["utils/ready"],function(e){function t(t,n){e(function(){new t(n)})}return t}),n("utils/AssetLoader",["utils/assert","utils/log","utils/inherit","events/EventType","events/EventDispatcher"],function(e,t,n,i,r){function s(){Object.defineProperty(this,"state",{get:function(){return this._state||Object.defineProperty(this,"_state",{value:s.STATE.IDLE,writable:!0}),this._state}}),Object.defineProperty(this,"queue",{get:function(){return this._queue||Object.defineProperty(this,"_queue",{value:[],writable:!0}),this._queue}}),Object.defineProperty(this,"assets",{get:function(){return this._assets||Object.defineProperty(this,"_assets",{value:{},writable:!0}),this._assets}}),Object.defineProperty(this,"async",{get:function(){return void 0===this._async?!0:this._async},set:function(t){e(this.state!==s.STATE.IN_PROGRESS,"Cannot change the async mode while it is in progress."),this.state!==s.STATE.IN_PROGRESS&&Object.defineProperty(this,"_async",{value:t,writable:!0})}}),Object.defineProperty(this,"bytesLoaded",{get:function(){if(this._bytesLoaded){for(var e=0,t=this._bytesLoaded.length,n=0;t>n;n++)e+=this._bytesLoaded[n];return e}return 0}}),Object.defineProperty(this,"bytesTotal",{get:function(){if(this._bytesTotal){for(var e=0,t=this._bytesTotal.length,n=0;t>n;n++)e+=this._bytesTotal[n];return e}return 0}}),Object.defineProperty(this,"progress",{get:function(){if(!this._bytesTotal||!this._bytesLoaded)return 0;if(this._bytesTotal.length!==this._bytesLoaded.length)return 0;for(var e=this._bytesTotal.length,t=0,n=0;e>n;n++){var i=this._bytesLoaded[n],r=this._bytesTotal[n];r>0&&(t+=i/r)}return t/e}}),s.__super__.constructor.apply(this,arguments)}var a=["jpg","png","svg","jpeg","gif"],o=["mp4","mpeg","ogg","ogv","mov","avi","flv"],u=["mp3","mp4","mpeg","flac","wav","ogg"],l={IMAGE:{jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg"},VIDEO:{mp4:"video/mp4",mov:"video/quicktime",mpeg:"video/mpeg",ogg:"video/ogg",ogv:"video/ogg",avi:"video/avi",flv:"video/x-flv"},AUDIO:{mp3:"audio/mpeg",mpeg:"audio/mpeg",mp4:"audio/mp4",flac:"audio/flac",ogg:"audio/ogg",wav:"audio/vnd.wave"}};return n(s,r),s.STATE={IDLE:0,IN_PROGRESS:1,COMPLETED:2,FAILED:3,ABORTED:4},s.TYPE={IMAGE:"image",VIDEO:"video",AUDIO:"audio"},s.prototype.init=function(){if(!(this.queue.length<1)){t("[AssetLoader]::init()");var e=this.queue.length;this._xhrs=[],this._pending=e;for(var n=0;e>n;n++){var i=this.queue[n];t("[AssetLoader]::Started loading: "+i.path);var r=this.getXHR({id:n,path:i.path,type:i.type});r.send(),this._xhrs.push(r)}}},s.prototype.destroy=function(){if(this._xhrs){for(var e=this._xhrs.length,t=0;e>t;t++){var n=this._xhrs[t];n.abort(),this._xhrs[t]=null}this._queue=null,this._assets=null,this._bytesLoaded=null,this._bytesTotal=null}this._state=s.STATE.IDLE},s.prototype.enqueue=function(){if(e(arguments&&arguments.length>0,"There are no arguments specified."),e(this.state!==s.STATE.IN_PROGRESS,"Enqueueing is prohibited when the state is in progress."),arguments&&!(arguments.length<=0)&&this.state!==s.STATE.IN_PROGRESS){t("[AssetLoader]::enqueue("+arguments+")");for(var n=arguments.length,i=0;n>i;i++){var r=arguments[i];e("string"==typeof r||"object"==typeof r,'Each item to be enqueued must be a string of the target path or an object containing a "path" key and/or a "type" key'),e("string"==typeof r||"string"==typeof r.path,"Invalid path specified: "+r.path+".");var l="string"==typeof r?r:r.path,d=r.type;if(!d){var c=l.split(".").pop().toLowerCase();if(a.indexOf(c)>-1)d=s.TYPE.IMAGE;else if(o.indexOf(c)>-1)d=s.TYPE.VIDEO;else{if(!(u.indexOf(c)>-1))throw"[AssetLoader]::Unsupported asset format: "+l;d=s.TYPE.AUDIO}}d&&(this.queue.push({path:l,type:d}),this._bytesLoaded||(this._bytesLoaded=[]),this._bytesTotal||(this._bytesTotal=[]),this._bytesLoaded.push(0),this._bytesTotal.push(0))}}},s.prototype.dequeue=function(){if(e(arguments&&arguments.length>0,"There are no arguments specified."),e(this.state!==s.STATE.IN_PROGRESS,"Dequeueing is prohibited when the state is in progress."),arguments&&!(arguments.length<=0)&&this.state!==s.STATE.IN_PROGRESS)for(var t=arguments.length,n=0;t>n;n++){var i=arguments[n];
e("string"==typeof i,"Expecting path to be a string.");for(var r=this.queue.length,a=0;r>a;a++){var o=this.queue[a];if(o.path===i){this.queue.splice(a,1),this.bytesLoaded.splice(a,1),this.bytesTotal.splice(a,1);break}}}},s.prototype.getXHR=function(e){var t=e.path.split(".").pop().toLowerCase(),n=l[e.type.toUpperCase()][t];if(!n)throw"[AssetLoader]:: Unsupported asset format: "+e.path;var i=new XMLHttpRequest;return i.addEventListener("progress",this._onXHRProgress.bind(this),!1),i.addEventListener("load",this._onXHRLoadComplete.bind(this),!1),i.addEventListener("error",this._onXHRLoadError.bind(this),!1),i.addEventListener("abort",this._onXHRAbort.bind(this),!1),i.open("GET",e.path,this.async),i.overrideMimeType(n),i.data=e,i},s.prototype._onXHRProgress=function(e){if(e.lengthComputable){var n=e.currentTarget,r=n.data.id,s=n.data.path,a=n.data.type,o=e.loaded,u=e.total;n.data.bytesLoaded=o,n.data.bytesTotal=u,this._bytesLoaded[r]=o,this._bytesTotal[r]=u,this._bytesLoaded||(this._bytesLoaded=[]),t('[AssetLoader]::_onXHRProgress("'+s+'":'+o+"/"+u+")");var l=document.createEvent("CustomEvent");l.initCustomEvent(i.OBJECT.PROGRESS,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(l)}},s.prototype._onXHRLoadComplete=function(e){var n=e.currentTarget,r=n.data.id,s=n.data.path,a=n.data.type;t('[AssetLoader]::_onXHRLoadComplete("'+s+'"")'),this._pending--;var o=document.createEvent("CustomEvent");o.initCustomEvent(i.OBJECT.LOAD,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(o)},s.prototype._onXHRLoadError=function(e){var n=e.currentTarget,r=n.data.id,s=n.data.path,a=n.data.type;t('[AssetLoader]::_onXHRLoadError("'+s+'"")'),this._pending--;var o=document.createEvent("CustomEvent");if(o.initCustomEvent(i.OBJECT.ERROR,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(o),0===this._pending){var u=document.createEvent("CustomEvent");u.initCustomEvent(i.OBJECT.LOAD,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(u)}},s.prototype._onXHRAbort=function(e){var n=e.currentTarget,r=n.data.id,s=n.data.path,a=n.data.type;t('[AssetLoader]::_onXHRLoadError("'+s+'"")'),this._pending--;var o=document.createEvent("CustomEvent");if(o.initCustomEvent(i.OBJECT.ABORT,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(o),0===this._pending){var u=document.createEvent("CustomEvent");u.initCustomEvent(i.OBJECT.LOAD,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(u)}},s}),n("utils",["utils/assert","utils/debounce","utils/inherit","utils/isNull","utils/keyOfValue","utils/log","utils/module","utils/namespace","utils/ready","utils/sizeOf","utils/AssetLoader"],function(e,t,n,i,r,s,a,o,u,l,d){var c=function(e){return e};return Object.defineProperty(c,"assert",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(c,"debounce",{value:t,writable:!1,enumerable:!0}),Object.defineProperty(c,"inherit",{value:n,writable:!1,enumerable:!0}),Object.defineProperty(c,"isNull",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(c,"keyOfValue",{value:r,writable:!1,enumerable:!0}),Object.defineProperty(c,"log",{value:s,writable:!1,enumerable:!0}),Object.defineProperty(c,"module",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(c,"namespace",{value:o,writable:!1,enumerable:!0}),Object.defineProperty(c,"ready",{value:u,writable:!1,enumerable:!0}),Object.defineProperty(c,"sizeOf",{value:l,writable:!1,enumerable:!0}),Object.defineProperty(c,"AssetLoader",{value:d,writable:!1,enumerable:!0}),c}),n("vars",["enums","events","math","ui","utils"],function(e,t,n,i,r){function s(e,t){Object.defineProperty(a,e,{value:t,writable:!1});for(var n in t)t.hasOwnProperty(n)&&Object.defineProperty(a,n,{value:t[n],writable:!1})}var a=function(e){return e};return Object.defineProperty(a,"version",{value:"0.5.2",writable:!1}),Object.defineProperty(a,"debug",{value:!1,writable:!0}),s("enums",e),s("events",t),s("math",n),s("ui",i),s("utils",r),a}),t("vars")}());