!function(e,t,i){var n=t;"undefined"!=typeof module&&module.exports?module.exports=n:e.vars=n}("undefined"!=typeof window?window:this,function(){var e,t,i;return function(n){function r(e,t){return b.call(e,t)}function s(e,t){var i,n,r,s,a,o,u,l,d,h,f,p=t&&t.split("/"),c=y.map,m=c&&c["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&w.test(e[a])&&(e[a]=e[a].replace(w,"")),e=p.slice(0,p.length-1).concat(e),d=0;d<e.length;d+=1)if(f=e[d],"."===f)e.splice(d,1),d-=1;else if(".."===f){if(1===d&&(".."===e[2]||".."===e[0]))break;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&c){for(i=e.split("/"),d=i.length;d>0;d-=1){if(n=i.slice(0,d).join("/"),p)for(h=p.length;h>0;h-=1)if(r=c[p.slice(0,h).join("/")],r&&(r=r[n])){s=r,o=d;break}if(s)break;!u&&m&&m[n]&&(u=m[n],l=d)}!s&&u&&(s=u,o=l),s&&(i.splice(0,o,s),e=i.join("/"))}return e}function a(e,t){return function(){var i=O.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),p.apply(n,i.concat([e,t]))}}function o(e){return function(t){return s(t,e)}}function u(e){return function(t){v[e]=t}}function l(e){if(r(E,e)){var t=E[e];delete E[e],g[e]=!0,f.apply(n,t)}if(!r(v,e)&&!r(g,e))throw new Error("No "+e);return v[e]}function d(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function h(e){return function(){return y&&y.config&&y.config[e]||{}}}var f,p,c,m,v={},E={},y={},g={},b=Object.prototype.hasOwnProperty,O=[].slice,w=/\.js$/;c=function(e,t){var i,n=d(e),r=n[0];return e=n[1],r&&(r=s(r,t),i=l(r)),r?e=i&&i.normalize?i.normalize(e,o(t)):s(e,t):(e=s(e,t),n=d(e),r=n[0],e=n[1],r&&(i=l(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:i}},m={require:function(e){return a(e)},exports:function(e){var t=v[e];return"undefined"!=typeof t?t:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:h(e)}}},f=function(e,t,i,s){var o,d,h,f,p,y,b=[],O=typeof i;if(s=s||e,"undefined"===O||"function"===O){for(t=!t.length&&i.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(f=c(t[p],s),d=f.f,"require"===d)b[p]=m.require(e);else if("exports"===d)b[p]=m.exports(e),y=!0;else if("module"===d)o=b[p]=m.module(e);else if(r(v,d)||r(E,d)||r(g,d))b[p]=l(d);else{if(!f.p)throw new Error(e+" missing "+d);f.p.load(f.n,a(s,!0),u(d),{}),b[p]=v[d]}h=i?i.apply(v[e],b):void 0,e&&(o&&o.exports!==n&&o.exports!==v[e]?v[e]=o.exports:h===n&&y||(v[e]=h))}else e&&(v[e]=i)},e=t=p=function(e,t,i,r,s){if("string"==typeof e)return m[e]?m[e](t):l(c(e,t).f);if(!e.splice){if(y=e,y.deps&&p(y.deps,y.callback),!t)return;t.splice?(e=t,t=i,i=null):e=n}return t=t||function(){},"function"==typeof i&&(i=r,r=s),r?f(n,e,t,i):setTimeout(function(){f(n,e,t,i)},4),p},p.config=function(e){return p(e)},e._defined=v,i=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),r(v,e)||r(E,e)||(E[e]=[e,t,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("enums/DirtyType",{NONE:0,POSITION:1,SIZE:2,LAYOUT:4,STATE:8,DATA:16,LOCALE:32,DEPTH:64,CONFIG:128,STYLE:256,INPUT:512,ORIENTATION:1024,CUSTOM:2048,ALL:4294967295}),i("enums/KeyCode",{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE_BREAK:19,CAPS_LOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_CMD:91,RIGHT_CMD:92,SELECT:93,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222}),i("enums/NodeState",{IDLE:0,INITIALIZED:1,UPDATED:2,DESTROYED:3}),i("enums",["enums/DirtyType","enums/KeyCode","enums/NodeState"],function(e,t,i){var n=function(e){return e};return Object.defineProperty(n,"DirtyType",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(n,"KeyCode",{value:t,writable:!1,enumerable:!0}),Object.defineProperty(n,"NodeState",{value:i,writable:!1,enumerable:!0}),n}),i("utils/assert",[],function(){function e(e,t){if(!e)throw new Error(t||"Assert failed");return e}return e}),i("utils/log",[],function(){function e(){window&&window.VARS_DEBUG&&window.console&&console.log&&Function.apply.call(console.log,console,arguments)}return e}),i("events/EventDispatcher",["utils/assert","utils/log"],function(e,t){function i(e){this.__define_properties()}return i.prototype.addEventListener=function(i,n){e(i,"Event type must be specified."),e(n,"Listener must be specified."),i&&n&&(t("[EventDispatcher]::addEventListener("+i+")"),this._listenerMap||Object.defineProperty(this,"_listenerMap",{value:{},writable:!0}),this._listenerMap[i]||(this._listenerMap[i]=[]),this._listenerMap[i].push(n))},i.prototype.removeEventListener=function(i,n){if(e(i,"Event type must be specified."),e(this._listenerMap,"Listener map is null."),e(this._listenerMap[i],"There are no listeners registered for event type: "+i),i&&this._listenerMap&&this._listenerMap[i])if(t("[EventDispatcher]::removeEventListener("+i+")"),n){var r=this._listenerMap[i].indexOf(n);r>-1&&this._listenerMap[i].splice(r,1)}else delete this._listenerMap[i]},i.prototype.hasEventListener=function(t,i){if(e(t,"Event type must be specified."),e(this._listenerMap,"Listener map is null."),e(this._listenerMap[t],"There are no listeners registered for event type: "+t),!t)return!1;if(!this._listenerMap)return!1;if(!this._listenerMap[t])return!1;if(i){var n=this._listenerMap[t].indexOf(i);return n>-1}return!0},i.prototype.dispatchEvent=function(i){if(e(i,"Event must be specified."),e(this._listenerMap,"Listener map is null."),i){if(!this._listenerMap)return!1;if(!this._listenerMap[i.type])return!1;t("[EventDispatcher]::dispatchEvent("+i.type+")"),i.target=this,i.currentTarget=this,i.customTarget=this;for(var n=this._listenerMap[i.type].length,r=0;n>r;r++){var s=this._listenerMap[i.type][r];s.call(this,i)}}},i.prototype.__define_properties=function(){},i}),i("events/EventType",{MOUSE:{CLICK:"click",CONTEXT_MENU:"contextmenu",CLICK_OUTSIDE:"clickoutside",DOUBLE_CLICK:"dblclick",MOUSE_DOWN:"mousedown",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_UP:"mouseup"},KEYBOARD:{KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup"},DEVICE:{DEVICE_ORIENTATION:"deviceorientation",DEVICE_MOTION:"devicemotion",ORIENTATION:"MozOrientation",ORIENTATION_CHANGE:"orientationchange"},OBJECT:{ABORT:"abort",BEFORE_UNLOAD:"beforeunload",ERROR:"error",HASH_CHANGE:"hashchange",LOAD:"load",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",PROGRESS:"progress"},FORM:{BLUR:"blur",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",INPUT:"input",INVALID:"invalid",RESET:"reset",SEARCH:"search",SELECT:"select",SUBMIT:"submit"},DRAG:{DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DRAG_START:"dragstart",DROP:"drop"},CLIPBOARD:{COPY:"copy",CUT:"cut",PASTE:"paste"},PRINT:{AFTER_PRINT:"afterprint",BEFORE_PRINT:"beforeprint"},MEDIA:{ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting"},ANIMATION:{ANIMATION_END:"animationend",ANIMATION_ITERATION:"animationiteration",ANIMATION_START:"animationstart"},TRANSITION:{TRANSITION_END:"transitionend"},SERVER_SENT:{ERROR:"error",MESSAGE:"message",OPEN:"open"},MISC:{MESSAGE:"message",ONLINE:"online",OFFLINE:"offline",POP_STATE:"popstate",SHOW:"show",STORAGE:"storage",TOGGLE:"toggle",WHEEL:"wheel"},TOUCH:{TOUCH_CANCEL:"touchcancel",TOUCH_END:"touchend",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart"}}),i("events",["events/EventDispatcher","events/EventType"],function(e,t){var i=function(e){return e};return Object.defineProperty(i,"EventDispatcher",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(i,"EventType",{value:t,writable:!1,enumerable:!0}),i}),i("math/clamp",[],function(){function e(e,t,i){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof i)return NaN;var n=e;return n=Math.min(n,i),n=Math.max(n,t)}return e}),i("math/isClamped",[],function(){function e(e,t,i,n){return n?e>t&&i>e:e>=t&&i>=e}return e}),i("math/isEven",[],function(){function e(e,t){return 0===e?t!==!1:e%2===0}return e}),i("math/isOdd",[],function(){function e(e){return 0===e?!1:e%2!==0}return e}),i("math",["math/clamp","math/isClamped","math/isEven","math/isOdd"],function(e,t,i,n){var r=function(e){return e};return Object.defineProperty(r,"clamp",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(r,"isClamped",{value:t,writable:!1,enumerable:!0}),Object.defineProperty(r,"isEven",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(r,"isOdd",{value:n,writable:!1,enumerable:!0}),r}),i("ui/Directives",{Controller:"vs-controller",Instance:"vs-instance",Property:"vs-property",Data:"vs-data",State:"vs-state",Style:"vs-style"}),i("utils/debounce",[],function(){function e(e,t,i){var n;return function(){var r=this,s=arguments,a=function(){n=null,i||e.apply(r,s)},o=i&&!n;clearTimeout(n),n=setTimeout(a,t),o&&e.apply(r,s)}}return e}),i("utils/sizeOf",[],function(){function e(e){if(void 0===e||null===e)return 0;if(void 0!==e.length)return e.length;var t=0;switch(typeof e){case"object":if(null!==e&&void 0!==e)for(var i in e)t++;break;case"number":t=(""+e).length;break;default:t=0}return t}return e}),i("ui/ElementUpdateDelegate",["enums/DirtyType","events/EventType","utils/assert","utils/debounce","utils/log","utils/sizeOf"],function(e,t,i,n,r,s){function a(i){r("[ElementUpdateDelegate]::new(",i,")");var a=0,o=null,u=null,l=null,d=null,h=null,f=null,p=null,c=null;this.delegate=i,this.setDirty=function(t,i){if(r("[ElementUpdateDelegate]::setDirty(",t,i,")"),this.transmissive!==e.NONE&&this.delegate.children)for(var n in this.delegate.children){var o;o=this.delegate.children[n]instanceof Array?this.delegate.children[n]:[this.delegate.children[n]];for(var u=s(o),l=0;u>l;l++){var d=o[l];if(d.updateDelegate&&d.updateDelegate.setDirty){var h=t&d.updateDelegate.receptive;h!==e.NONE&&d.updateDelegate.setDirty(h,i)}}}if(!this.isDirty(t)||i){switch(t){case e.NONE:case e.ALL:a=t;break;default:a|=t}i?this.update():this._pendingAnimationFrame||(this._pendingAnimationFrame=m(this.update.bind(this)))}},this.isDirty=function(t){switch(r("[ElementUpdateDelegate]::isDirty(",t,a,")"),t){case e.NONE:case e.ALL:return a===t;default:return 0!==(t&a)}},this.init=function(){r("[ElementUpdateDelegate]::init()");var i=this.conductor||window;window&&i&&i.addEventListener&&(this.responsive===!0||this.responsive instanceof Array)&&((this.responsive===!0||this.responsive.indexOf(t.OBJECT.RESIZE)>-1||this.responsive.indexOf(t.DEVICE.ORIENTATION_CHANGE)>-1)&&(o=0===this.refreshRate?E.bind(this):n(E.bind(this),this.refreshRate)),(this.responsive===!0||this.responsive.indexOf(t.OBJECT.SCROLL)>-1)&&(u=0===this.refreshRate?y.bind(this):n(y.bind(this),this.refreshRate)),(this.responsive===!0||this.responsive.indexOf(t.MISC.WHEEL)>-1)&&(h=0===this.refreshRate?b.bind(this):n(b.bind(this),this.refreshRate)),(this.responsive===!0||this.responsive.indexOf(t.MOUSE.MOUSE_MOVE)>-1)&&(l=0===this.refreshRate?g.bind(this):n(g.bind(this),this.refreshRate)),(this.responsive===!0||this.responsive.indexOf(t.DEVICE.DEVICE_ORIENTATION)>-1||this.responsive.indexOf(t.DEVICE.DEVICE_MOTION)>-1||this.responsive.indexOf(t.DEVICE.ORIENTATION)>-1)&&(d=0===this.refreshRate?O.bind(this):n(O.bind(this),this.refreshRate)),(this.responsive===!0||this.responsive.indexOf(t.KEYBOARD.KEY_DOWN)>-1)&&(c=w.bind(this)),(this.responsive===!0||this.responsive.indexOf(t.KEYBOARD.KEY_PRESS)>-1)&&(p=_.bind(this)),(this.responsive===!0||this.responsive.indexOf(t.KEYBOARD.KEY_UP)>-1)&&(f=T.bind(this)),o&&(window.addEventListener(t.OBJECT.RESIZE,o),window.addEventListener(t.DEVICE.ORIENTATION_CHANGE,o)),u&&i.addEventListener(t.OBJECT.SCROLL,u),h&&this.delegate.addEventListener(t.MISC.WHEEL,h),l&&this.delegate.addEventListener(t.MOUSE.MOUSE_MOVE,l),d&&(window.DeviceOrientationEvent?window.addEventListener(t.DEVICE.DEVICE_ORIENTATION,d):window.DeviceMotionEvent&&window.addEventListener(t.DEVICE.DEVICE_MOTION,d)),c&&window.addEventListener(t.KEYBOARD.KEY_DOWN,c),p&&window.addEventListener(t.KEYBOARD.KEY_PRESS,p),f&&window.addEventListener(t.KEYBOARD.KEY_UP,f)),this.setDirty(e.ALL)},this.destroy=function(){r("[ElementUpdateDelegate]::destroy()"),v();var e=this.conductor||window;window&&e&&e.removeEventListener&&(o&&(window.removeEventListener(t.OBJECT.RESIZE,o),window.removeEventListener(t.DEVICE.ORIENTATION_CHANGE,o)),u&&e.removeEventListener(t.OBJECT.SCROLL,u),h&&this.delegate.removeEventListener(t.MISC.WHEEL,h),l&&this.delegate.removeEventListener(t.MOUSE.MOUSE_MOVE,l),d&&(window.DeviceOrientationEvent?window.removeEventListener(t.DEVICE.DEVICE_ORIENTATION,d):window.DeviceMotionEvent&&window.removeEventListener(t.DEVICE.DEVICE_MOTION,d)),c&&window.removeEventListener(t.KEYBOARD.KEY_DOWN,c),p&&window.removeEventListener(t.KEYBOARD.KEY_PRESS,p),f&&window.removeEventListener(t.KEYBOARD.KEY_UP,f)),o=null,u=null,h=null,l=null,d=null,c=null,p=null,f=null},this.update=function(){r("[ElementUpdateDelegate]::update()"),v(this._pendingAnimationFrame),this.delegate&&this.delegate.update&&this.delegate.update.call(this.delegate),this.setDirty(e.NONE),delete this.mouse.pointerX,delete this.mouse.pointerY,delete this.mouse.wheelX,delete this.mouse.wheelY,delete this.orientation.x,delete this.orientation.y,delete this.orientation.z,delete this.keyCode.up,delete this.keyCode.press,delete this.keyCode.down,this._pendingAnimationFrame=null};var m=function(e){var t=window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)||null;return t||(t=function(e){return window?window.setTimeout(e,10):null}),t(e)},v=function(e){var t=window&&(window.requestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame)||null;return t||(t=function(e){return window?window.clearTimeout(e):null}),t},E=function(t){this.setDirty(e.SIZE)},y=function(t){this.setDirty(e.POSITION)},g=function(t){this.mouse.pointerX=t.clientX,this.mouse.pointerY=t.clientY,this.setDirty(e.INPUT)},b=function(t){this.mouse.wheelX=t.deltaX,this.mouse.wheelY=t.deltaY,this.setDirty(e.INPUT)},O=function(t){if(window){var i,n,r;t instanceof window.DeviceOrientationEvent?(i=t.beta,n=t.gamma,r=t.alpha):t instanceof window.DeviceMotionEvent?(i=2*t.acceleration.x,n=2*t.acceleration.y,r=2*t.acceleration.z):(i=50*t.orientation.x,n=50*t.orientation.y,r=50*t.orientation.z),this.orientation.x=i,this.orientation.y=n,this.orientation.z=r,this.setDirty(e.ORIENTATION)}},w=function(t){window&&(void 0===this.keyCode.down&&(this.keyCode.down=[]),this.keyCode.down.push(t.keyCode),this.setDirty(e.INPUT))},_=function(t){window&&(void 0===this.keyCode.press&&(this.keyCode.press=[]),this.keyCode.press.push(t.keyCode),this.setDirty(e.INPUT))},T=function(t){window&&(void 0===this.keyCode.up&&(this.keyCode.up=[]),this.keyCode.up.push(t.keyCode),this.setDirty(e.INPUT))}}var o=0;return Object.defineProperty(a.prototype,"delegate",{value:null,writable:!0}),Object.defineProperty(a.prototype,"responsive",{value:!1,writable:!0}),Object.defineProperty(a.prototype,"refreshRate",{value:o,writable:!0}),Object.defineProperty(a.prototype,"transmissive",{value:e.NONE,writable:!0}),Object.defineProperty(a.prototype,"receptive",{value:e.NONE,writable:!0}),Object.defineProperty(a.prototype,"conductor",{value:window,writable:!0}),Object.defineProperty(a.prototype,"mouse",{value:{},writable:!1}),Object.defineProperty(a.prototype,"orientation",{value:{},writable:!1}),Object.defineProperty(a.prototype,"keyCode",{value:{},writable:!1}),a.prototype.toString=function(){return"[ElementUpdateDelegate{"+(this.delegate&&this.delegate.name||"undefined")+"}]"},a}),i("utils/assertType",["utils/assert"],function(e){function t(t,n,r,s){if(e(void 0!==n,"Paremeter 'type' must be a string or a class")&&e(void 0===r||"boolean"==typeof r,"Paremeter 'allowUndefined', if specified, must be a boolean")&&e(void 0===s||"string"==typeof s,"Parameter 'message', if specified, must be a string")){r=void 0===r?!1:r;var a=!1;if(r&&void 0===t)a=!0;else if(n instanceof Array){for(var o=n.length,u=0;o>u;u++)if(i(t,n[u])){a=!0;break}}else a=i(t,n);if(!a)throw new Error(s||"AssertType failed");return a}}function i(e,t){if("string"!=typeof t)return e instanceof t;switch(t){case"string":case"object":case"number":case"boolean":return typeof e===t;case"array":return e instanceof Array;default:return!1}}return t}),i("utils/isNull",[],function(){function e(t,i){if(i=void 0===i?!1:i,void 0===t||null===t)return!0;if(i&&t instanceof Array){for(var n=t.length,r=0;n>r;r++)if(!e(t[r],!0))return!1;return!0}if(i&&"object"==typeof t){for(var s in t)if(!e(t[s],!0))return!1;return!0}return!1}return e}),i("utils/keyOfValue",[],function(){function e(e,t){if(!e||!t)return null;if("object"!=typeof e)return null;for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t)return i;return null}return e}),i("ui/Element",["enums/DirtyType","enums/NodeState","events/EventType","ui/Directives","ui/ElementUpdateDelegate","utils/assert","utils/assertType","utils/isNull","utils/keyOfValue","utils/log","utils/sizeOf"],function(e,t,i,n,r,s,a,o,u,l,d){function h(i){if(this._nodeState=t.IDLE,this.__define_properties(),void 0!==i)if(i instanceof HTMLElement)this.element=i;else if("string"==typeof i)this.name=i;else if("object"==typeof i)for(var r in i)if(this.hasOwnProperty(r))if("children"===r){var s=i.children;for(var a in s)this.addChild(s[a],a)}else this[r]=i[r];for(var o=this.element.attributes,u=d(o),h=new RegExp("^"+n.Property+"-|^data-"+n.Property+"-","i"),f=new RegExp("^"+n.Data+"-|^data-"+n.Data+"-","i"),p=0;u>p;p++){var c=o[p];if(h.test(c.name)){var m=c.name.replace(h,"").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});Object.defineProperty(this.properties,m,{value:""===c.value?!0:c.value,writable:!0})}else if(f.test(c.name)){var v=c.name.replace(f,"").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()});Object.defineProperty(this.data,v,{get:function(e,t){return function(){return void 0===this.data[e]?t:this.data[e]}.bind(this)}.bind(this)("_"+v,""===c.value?!0:c.value),set:function(t,i){return function(n){this.data[i]=n,this.element.setAttribute(t,n),this.updateDelegate.setDirty(e.DATA)}.bind(this)}.bind(this)(c.name,"_"+v)})}}l(this.toString()+":new(",i,")"),this.init()}return h.prototype.init=function(){l(this.toString()+"::init()"),this._nodeState=t.INITIALIZED,this.updateDelegate.init();for(var e in this.children){var i=this.children[e];i instanceof Array?i.forEach(function(e){(e.nodeState===t.IDLE||e.nodeState===t.DESTROYED)&&e.init()}):(i.nodeState===t.IDLE||i.nodeState===t.DESTROYED)&&i.init()}},h.prototype.destroy=function(){l(this.toString()+"::destroy()");for(var e in this.children){var i=this.children[e];i instanceof Array?i.forEach(function(e){e.nodeState!==t.DESTROYED&&e.destroy()}):i.nodeState!==t.DESTROYED&&i.destroy()}this.removeAllEventListeners(),this.updateDelegate.destroy(),this._nodeState=t.DESTROYED},h.prototype.update=function(){l(this.toString()+"::update()"),this._nodeState=t.UPDATED},h.prototype.respondsTo=function(){var e=Array.prototype.slice.call(arguments),i=d(e);s(i>0,"Too few arguments")&&s(this.nodeState===t.IDLE,"Responsiveness must be defined when the node state of this element is IDLE")&&(isNaN(e[0])?(this.updateDelegate.conductor=e.shift(),this.updateDelegate.refreshRate=e.shift()):this.updateDelegate.refreshRate=e.shift(),0===d(e)?this.updateDelegate.responsive=!0:this.updateDelegate.responsive=e)},h.prototype.addChild=function(e,i){if(s(void 0!==e,"Parameter 'child' must be specified"))if(e.jquery)this.addChild(e.get(),i);else if(e instanceof Array)for(var n=d(e),r=0;n>r;r++){var o=e[r];this.addChild(o,i)}else{if(!a(e,[HTMLElement,h],!1,"Invalid child specified. Child must be an instance of HTMLElement or VARS Element."))return;if(e instanceof HTMLElement&&(e=new h({element:e,name:i})),i=i||e.name,!s(i||e.name,"Either child name was unprovided or it cannot be deducted from the specified child"))return null;if(this.children[i])if(this.children[i]instanceof Array)this.children[i].push(e);else{var u=[this.children[i]];u.push(e),this.children[i]=u}else this.children[i]=e;e.name=i,(e.nodeState===t.IDLE||e.nodeState===t.DESTROYED)&&e.init();var l=!0;if(e.element.parentNode&&document)for(var f=e.element;null!==f&&void 0!==f&&f!==document;)if(f=f.parentNode,f===this.element){l=!1;break}l&&this.element.appendChild(e.element)}},h.prototype.hasChild=function(e){if(!s(void 0!==e,"Child is undefined"))return!1;if("string"==typeof e)return!o(this.getChild(e));var t;for(e.jquery&&1===e.length?t=e.get(0):e instanceof h?t=e.element:e instanceof HTMLElement&&(t=e);!o(t)&&t!==document;)if(t=t.parentNode,t===this.element)return!0;return!1},h.prototype.removeChild=function(e){if(s(!o(e,!0),"No valid child specified"))if("string"==typeof e)this.removeChild(this.getChild(e));else if(e instanceof Array||e.jquery&&e.length>1)for(;e.length>0;)this.removeChild(e[0]);else if(this.hasChild(e)){var t;if(e.jquery&&1===e.length?t=e.get(0):e instanceof h?t=e.element:e instanceof HTMLElement&&(t=e),o(t))return;for(var i in this.children){var n=this.children[i];if(n instanceof Array){for(var r=n.length,a=0,u=0;r>u;u++){var l=n[u];if(a=u,l.element===t){l.destroy(),t.parentNode.removeChild(t);break}}n.splice(a,1),0===n.length&&delete this.children[i]}else n instanceof h&&(n.element===t?(n.destroy(),t.parentNode.removeChild(t),delete this.children[i]):n.removeChild(e))}}},h.prototype.getChild=function(e,t){if(!a(e,"string",!1,"Child name must be specified"))return null;if(!a(t,"boolean",!0,"Parameter 'recursive', if specified, must be a boolean"))return null;t=void 0===t?!0:t;var i=e.split("."),n=i.shift(),r=this.children[n];if(t&&i.length>0){if(r instanceof Array){for(var s=[],u=d(r),l=0;u>l;l++){var f=r[l];f instanceof h?s.push(f.getChild(i.join("."))):s.push(null)}return o(s,!0)?null:s}return r instanceof h?r.getChild(i.join(".")):null}return o(r,!0)?null:r},h.prototype.addEventListener=function(){var e=arguments[0],t=arguments[1],n=arguments[2]||!1;if(this.cachesListeners){this._listenerMap||Object.defineProperty(this,"_listenerMap",{value:{},writable:!1}),this._listenerMap[e]||(this._listenerMap[e]=[]);var r=this._listenerMap[e],s=d(r),a=!0;if(e===i.MOUSE.CLICK_OUTSIDE){var o=t;t=function(e){e.target===this.element||this.hasChild(e.target)||o(e)}.bind(this)}for(var u=0;s>u;u++){var l=r[u];if(l.listener===t){a=!1;break}}a&&r.push({listener:t,useCapture:n})}window&&e===i.MOUSE.CLICK_OUTSIDE?window.addEventListener(i.MOUSE.CLICK,t,n):this.element.addEventListener.apply(this.element,arguments)},h.prototype.hasEventListener=function(e,t){if(!this._listenerMap)return!1;if(!this._listenerMap[e])return!1;if(t){for(var i=this._listenerMap[e],n=d(i),r=0;n>r;r++){var s=i[r];if(s.listener===t)return!0}return!1}return!0},h.prototype.removeEventListener=function(){var e=arguments[0],t=arguments[1],n=arguments[2]||!1;if(this._listenerMap){var r=this._listenerMap[e],s=d(r),a=-1;if(t){for(var o=0;s>o;o++){var u=r[o];if(u.listener===t){a=o;break}}a>-1&&(r.splice(a,1),0===d(r)&&(this._listenerMap[e]=null,delete this._listenerMap[e]))}else for(;void 0!==this._listenerMap[e];)this.removeEventListener(e,this._listenerMap[e][0].listener,this._listenerMap[e][0].useCapture)}t&&(window&&e===i.MOUSE.CLICK_OUTSIDE?window.removeEventListener(i.MOUSE.CLICK,t,n):this.element.removeEventListener.apply(this.element,arguments))},h.prototype.removeAllEventListeners=function(){if(this._listenerMap)for(var e in this._listenerMap)this.removeEventListener(e)},h.prototype.addClass=function(e){var t=[];if(s("string"==typeof e||e instanceof Array,"Invalid class name specified. Must be either a string or an array of strings.")){"string"==typeof e?t.push(e):t=e;for(var i=d(t),n=0;i>n;n++){var r=t[n];s("string"==typeof r,"Invalid class detected: "+r)&&(this.hasClass(r)||(this.element.className=this.element.className+(""===this.element.className?"":" ")+r))}}},h.prototype.removeClass=function(e){var t=[];if(s("string"==typeof e||e instanceof Array,"Invalid class name specified. Must be either a string or an array of strings.")){"string"==typeof e?t.push(e):t=e;for(var i=d(t),n=0;i>n;n++){var r=t[n];if(s("string"==typeof r,"Invalid class detected: "+r)){var a=new RegExp("^"+r+"\\s+|\\s+"+r+"|^"+r+"$","g");this.element.className=this.element.className.replace(a,"")}}}},h.prototype.hasClass=function(e){return s("string"==typeof e,"Invalid class detected: "+e)?this["class"].indexOf(e)>-1:!1},h.prototype.factory=function(){return document.createElement("div")},h.prototype.isDirty=function(){return this.updateDelegate.isDirty.apply(this.updateDelegate,arguments)},h.prototype.setDirty=function(){return this.updateDelegate.setDirty.apply(this.updateDelegate,arguments)},h.prototype.toString=function(){return"[Element{"+this.name+"}]"},h.prototype.__define_properties=function(){Object.defineProperty(this,"element",{get:function(){return this._element||Object.defineProperty(this,"_element",{value:this.factory(),writable:!0}),this._element},set:function(e){this.__set_element(e)}}),Object.defineProperty(this,"id",{get:function(){return this.element.id},set:function(e){this.element.setAttribute("id",e)}}),Object.defineProperty(this,"name",{get:function(){var e=this.element.getAttribute(n.Instance)||this.element.getAttribute("data-"+n.Instance);return e&&""!==e?e:null},set:function(e){e&&""!==e&&(this.name||this.element.setAttribute("data-"+n.Instance,e))}}),Object.defineProperty(this,"class",{get:function(){return this.element.className.split(" ")},set:function(e){this.element.className=e.join(" ")}}),Object.defineProperty(this,"nodeState",{get:function(){return this._nodeState||t.IDLE}}),Object.defineProperty(this,"state",{get:function(){var e=this.element.getAttribute(n.State)||this.element.getAttribute("data-"+n.State);return e&&""!==e?e:null},set:function(t){this.state!==t&&(null===t||void 0===t?(this.element.removeAttribute(n.State),this.element.removeAttribute("data-"+n.State)):this.element.setAttribute("data-"+n.State,t),this.updateDelegate.setDirty(e.STATE))}}),Object.defineProperty(this,"style",{get:function(){var e=this.element.getAttribute(n.Style)||this.element.getAttribute("data-"+n.Style);return e&&""!==e?e:null},set:function(t){this.style!==t&&(null===t||void 0===t?(this.element.removeAttribute(n.Style),this.element.removeAttribute("data-"+n.Style)):this.element.setAttribute("data-"+n.Style,t),this.updateDelegate.setDirty(e.STYLE))}}),Object.defineProperty(this,"children",{value:{},writable:!1}),Object.defineProperty(this,"data",{value:{},writable:!1}),Object.defineProperty(this,"properties",{value:{},writable:!1}),Object.defineProperty(this,"updateDelegate",{get:function(){return this._updateDelegate||Object.defineProperty(this,"_updateDelegate",{value:new r(this),writable:!1}),this._updateDelegate}}),Object.defineProperty(this,"cachesListeners",{value:!0,writable:!0})},h.prototype.__set_element=function(e){s(!this._element,"Element cannot be overwritten."),s(e instanceof HTMLElement||e instanceof h,"Invalid element type specified. Must be an instance of HTMLElement or Element."),e instanceof h?Object.defineProperty(this,"_element",{value:e.element,writable:!0}):Object.defineProperty(this,"_element",{value:e,writable:!0})},h}),i("ui/getClassIndex",["ui/Element","utils/assert"],function(e,t){function i(i,n){if(!t(i&&(i instanceof HTMLElement||i instanceof e||i.jquery),"Invalid element specified. Element must be an instance of HTMLElement or Element."))return null;if(i instanceof e&&(i=i.element),i.jquery&&(i=i.get(0)),!t(n&&"string"==typeof n,"Invalid class name: "+n))return-1;var r=i.className.split(" ");return r.indexOf(n)}return i}),i("ui/toElementArray",["ui/Element","utils/assert","utils/sizeOf"],function(e,t,i){function n(n,r){if(!t(n,"Element is undefined or null."))return null;var s;if(n instanceof Array)s=n;else if(n instanceof NodeList)s=Array.prototype.slice.call(n);else if(n.jquery)s=n.get();else{if(!t(n instanceof HTMLElement||n instanceof e,"Invalid element specified. Element must be an instance of HTMLElement or VARS Element."))return null;n instanceof HTMLElement?s=[n]:n instanceof e&&(s=[n.element])}for(var a=i(s),o=0;a>o;o++){var u=s[o];if(!t(u instanceof HTMLElement||u instanceof e,"Element array contains invalid element(s). Each element must be an instance of HTMLElement or VARS Element."))return null;!r&&u instanceof e&&(s[o]=u.element)}return s}return n}),i("ui/hasClass",["ui/getClassIndex","ui/toElementArray","ui/Element","utils/assert","utils/sizeOf"],function(e,t,i,n,r){function s(i,s){if(!n(s&&"string"==typeof s,"Invalid class name: "+s))return!1;for(var a=t(i),o=r(a),u=0;o>u;u++){var l=a[u];if(e(l,s)<0)return!1}return!0}return s}),i("ui/addClass",["ui/hasClass","ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i,n){function r(r,s){var a=t(r),o=[],u=n(a);if(i("string"==typeof s||s instanceof Array,"Invalid class name specified. Must be either a string or an array of strings.")){"string"==typeof s?o.push(s):o=s;for(var l=n(o),d=0;u>d;d++)for(var h=a[d],f=0;l>f;f++){var p=o[f];i("string"==typeof p,"Invalid class detected: "+p)&&(e(h,p)||(h.className=h.className+(""===h.className?"":" ")+p))}}}return r}),i("ui/getElementState",["ui/Directives","ui/Element","utils/assert","utils/sizeOf"],function(e,t,i,n){function r(n){if(!i(n&&(n instanceof HTMLElement||n instanceof t||n.jquery),"Invalid element specified."))return null;n.jquery&&(n=n.get(0));var r;return r=n instanceof t?n.state:n.getAttribute(e.State)||n.getAttribute("data-"+e.State),r&&""!==r?r:null}return r}),i("ui/changeElementState",["ui/Directives","ui/getElementState","ui/toElementArray","ui/Element","utils/assert","utils/sizeOf"],function(e,t,i,n,r,s){function a(r,a){for(var o=i(r,!0),u=s(o),l=0;u>l;l++){var d=o[l];t(d)!==a&&(d instanceof n?d.state=a:d.setAttribute("data-"+e.State,a))}}return a}),i("ui/getViewportRect",["utils/assert"],function(e){function t(){if(!e(window&&document,"Window or document undefined."))return null;var t={};return t.width=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t.height=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t.top=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,t.left=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t.bottom=t.top+t.height,t.right=t.left+t.width,t}return t}),i("ui/getRect",["ui/getViewportRect","ui/toElementArray","ui/Element","utils/assert","utils/sizeOf"],function(e,t,i,n,r){function s(i,a){if(!n(window,"This method relies on the window object, which is undefined."))return null;if(i===window)return e();a||(a=window);var o=t(i),u=r(o);if(0>=u)return null;var l=s(a);
if(!n(l,"Cannot determine reference FOV."))return null;for(var d=s(window),h={},f=0;u>f;f++){var p=o[f],c=p.getBoundingClientRect(),m=c.width,v=c.height,E=c.top+d.top;a!==window&&(E-=l.top);var y=c.left+d.left;a!==window&&(y-=l.left);var g=E+v,b=y+m;void 0===h.left?h.left=y:h.left=Math.min(h.left,y),void 0===h.right?h.right=b:h.right=Math.max(h.right,b),void 0===h.top?h.top=E:h.top=Math.min(h.top,E),void 0===h.bottom?h.bottom=g:h.bottom=Math.max(h.bottom,g)}return h.width=h.right-h.left,h.height=h.bottom-h.top,h}return s}),i("ui/getIntersectRect",["ui/getRect","ui/Element","utils/assert","utils/sizeOf"],function(e,t,i,n){function r(){if(!i(window,"This method relies on the window object, which is undefined."))return null;var t=n(arguments);if(!i(t>0,"This method requires at least 1 argument specified."))return null;for(var r,s,a={},o=0;t>o;o++){if(r||(r=e(arguments[o])),!i(r,"Invalid computed rect."))return null;if(0===o&&o+1===t)s=e(window);else{if(!(t>o+1))break;s=e(arguments[o+1])}if(!i(s,"Invalid computed rect."))return null;a.width=Math.max(0,Math.min(r.right,s.right)-Math.max(r.left,s.left)),a.height=Math.max(0,Math.min(r.bottom,s.bottom)-Math.max(r.top,s.top)),a.top=Math.max(r.top,s.top),a.left=Math.max(r.left,s.left),a.bottom=a.top+a.height,a.right=a.left+a.width,a.width*a.height===0&&(a.width=0,a.height=0,a.top=0,a.left=0,a.bottom=0,a.right=0),r=a}return a}return r}),i("ui/hasChild",["ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i){function n(n,r){var s=e(n),a=e(r);if(!t(1===i(s),"Invalid parent specified. Parent must be a single HTMLElement, VARS Element, or jQuery object."))return!1;if(!t(1===i(a),"Invalid child specified. Child must be a single HTMLElement, VARS Element, or jQuery object."))return!1;if(!t(document,"Document not found. This method requires document to be valid."))return!1;var o=s[0],u=a[0];if(!u.parentNode)return!1;for(;null!==u&&void 0!==u&&u!==document;)if(u=u.parentNode,u===o)return!0;return!1}return n}),i("ui/hitTestElement",["math/isClamped","ui/getIntersectRect","ui/getRect","ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i,n,r,s){function a(){if(!r(s(arguments)>1,"Insufficient arguments. Expecting at least 2."))return!1;var n=Array.prototype.slice.call(arguments),a="object"==typeof n[0]&&n[0].hasOwnProperty("x")&&n[0].hasOwnProperty("y");if(a){for(var o=n.shift(),u=s(n),l=!1,d=0;u>d;d++){var h=i(n[d]);e(o.x,h.left,h.right)&&e(o.y,h.top,h.bottom)&&(l=!0)}return l}var f=t.apply(null,arguments);return r(f,"Invalid elements specified.")?f.width*f.height!==0:!1}return a}),i("ui/hitTestRect",["math/isClamped","ui/getIntersectRect","ui/getRect","ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i,n,r,s){function a(){if(!r(s(arguments)>1,"Insufficient arguments. Expecting at least 2."))return!1;var i=Array.prototype.slice.call(arguments),n="object"==typeof i[0]&&i[0].hasOwnProperty("x")&&i[0].hasOwnProperty("y");if(n){for(var a=i.shift(),o=s(i),u=!1,l=0;o>l;l++){var d=i[l];if(!r(!(void 0===d.top||isNaN(d.top)||void 0===d.right||isNaN(d.right)||void 0===d.bottom||isNaN(d.bottom)||void 0===d.left||isNaN(d.left)),'Invalid rect supplied. Rect must be an object containing "top", "right", "bottom", and "left" key values.'))return!1;e(a.x,d.left,d.right)&&e(a.y,d.top,d.bottom)&&(u=!0)}return u}var h=t.apply(null,arguments);return r(h,"Invalid elements specified.")?h.width*h.height!==0:!1}return a}),i("utils/inherit",[],function(){function e(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return i.prototype=Object.create(t.prototype),e.prototype=new i,e.__super__=t.prototype,e}return e}),i("ui/Video",["utils/assert","utils/log","utils/inherit","enums/DirtyType","ui/Element"],function(e,t,i,n,r){function s(){s.__super__.constructor.apply(this,arguments)}return i(s,r),s.PRELOAD={AUTO:"auto",METADATA:"metada",NONE:"none"},s.prototype.update=function(){this.updateDelegate.isDirty(n.DATA)&&this._updateSource(),this.updateDelegate.isDirty(n.CUSTOM),s.__super__.update.call(this)},s.prototype.factory=function(){return document.createElement("video")},s.prototype._updateSource=function(){var e,t,i=this.element.getElementsByTagName("source");for(t=i.length,e=0;t>e;e++){var n=i[e];this.element.removeChild(n)}if(this.source)for(t=this.source.length,e=0;t>e;e++){var r=document.createElement("source"),s=this.source[e].src,a=this.source[e].type,o=s.split(".").pop();r.setAttribute("src",s),r.setAttribute("type",a||"video/"+o),this.element.appendChild(r)}},s.prototype.toString=function(){return"[Video{"+this.name+"}]"},s.prototype.__define_properties=function(){Object.defineProperty(this,"autoplay",{get:function(){return this.element.autoplay},set:function(e){this.element.autoplay=e,this.updateDelegate.setDirty(n.CUSTOM)}}),Object.defineProperty(this,"controls",{get:function(){return this.element.controls},set:function(e){this.element.controls=e,this.updateDelegate.setDirty(n.CUSTOM)}}),Object.defineProperty(this,"loop",{get:function(){return this.element.loop},set:function(e){this.element.loop=e,this.updateDelegate.setDirty(n.CUSTOM)}}),Object.defineProperty(this,"muted",{get:function(){return this.element.muted},set:function(e){this.element.muted=e,this.updateDelegate.setDirty(n.CUSTOM)}}),Object.defineProperty(this,"poster",{get:function(){return this.element.poster},set:function(e){this.element.poster=e,this.updateDelegate.setDirty(n.CUSTOM)}}),Object.defineProperty(this,"preload",{get:function(){return this.element.preload},set:function(e){this.element.preload=e,this.updateDelegate.setDirty(n.CUSTOM)}}),Object.defineProperty(this,"source",{get:function(){return this._source},set:function(e){Object.defineProperty(this,"_source",{value:e,writable:!0}),this.updateDelegate.setDirty(n.DATA)}}),s.__super__.__define_properties.call(this)},s.prototype.__set_element=function(t){e(t instanceof HTMLVideoElement,"Invalid element type specified. Must be an instance of HTMLVideoElement."),s.__super__.__set_element.call(this,t)},s}),i("utils/namespace",["utils/assert"],function(e){function t(t,i){if(!e("string"==typeof t,"Invalid identifiers specified."))return null;if(!e("undefined"==typeof i||"object"==typeof i,"Invalid scope specified."))return null;for(var n=t.split("."),r=void 0===i||null===i?window:i,s=0;s<n.length;s++)r=r[n[s]]||(r[n[s]]={});return r}return t}),i("utils/ready",[],function(){function e(e){if(!document)return null;var t=function(i){document.addEventListener?(document.removeEventListener("DOMContentLoaded",t,!1),window.removeEventListener("load",t,!1)):document.attachEvent&&(document.detachEvent("onreadystatechange",t),window.detachEvent("onload",t)),setTimeout(e,1)};return"complete"===document.readyState?setTimeout(e,1):(document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",t)),null)}return e}),i("ui/initDOM",["ui/Directives","ui/Element","ui/Video","ui/hasChild","utils/assert","utils/namespace","utils/ready","utils/sizeOf"],function(e,t,i,n,r,s,a,o){function u(e){a(function(){l(document,e)})}function l(n,a){var u=null;if(n||(n=document),n.jquery&&(n=n.get(0)),!r(n instanceof HTMLElement||n instanceof t||document&&n===document,"Element must be an instance of an HTMLElement or the DOM itself."))return null;n instanceof t&&(n=n.element);for(var h=n.querySelectorAll("["+e.Controller+"], [data-"+e.Controller+"], ["+e.Instance+"], [data-"+e.Instance+"]"),f=d(h),p=o(f),c=0;p>c;c++){var m=f[c],v=m.getAttribute(e.Controller)||m.getAttribute("data-"+e.Controller),E=m.getAttribute(e.Instance)||m.getAttribute("data-"+e.Instance),y=v?s(v,a):null;if(!y&&o(E)>0)y=t;else if("function"!=typeof y)switch(v){case"Video":y=i;break;case"Element":y=t;break;default:y=null}if(r("function"==typeof y,'Class "'+v+'" is not found in specified controllerScope '+(a||window)+".")){var g=new y({element:m,name:E,children:l(m,a)});if(o(E)>0)if(u||(u={}),u[E])if(u[E]instanceof Array)u[E].push(g);else{var b=[u[E]];b.push(g),u[E]=b}else u[E]=g}}return u}function d(e){for(var t=e.length,i=[],r=0;t>r;r++){for(var s=!0,a=e[r],o=0;t>o;o++)if(r!==o){var u=e[o];if(n(u,a)){s=!1;break}}s&&i.push(a)}return i}return u}),i("ui/removeClass",["ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i){function n(n,r){var s=e(n),a=[],o=i(s);if(t("string"==typeof r||r instanceof Array,"Invalid class name specified. Must be either a string or an array of strings.")){"string"==typeof r?a.push(r):a=r;for(var u=i(a),l=0;o>l;l++)for(var d=s[l],h=0;u>h;h++){var f=a[h];if(t("string"==typeof f,"Invalid class detected: "+f)){var p=new RegExp("^"+f+"\\s+|\\s+"+f,"g");d.className=d.className.replace(p,"")}}}}return n}),i("ui/transform",["ui/toElementArray","ui/getRect","utils/assert","utils/sizeOf"],function(e,t,i,n){function r(r,s,a){var o=e(r),u=n(o);if(s){if(!i(void 0===s.width||!isNaN(s.width),"Width property must be a number."))return null;if(!i(void 0===s.height||!isNaN(s.height),"Height property must be a number."))return null;if(!i(void 0===s.aspectRatio||!isNaN(s.aspectRatio),"Aspect ratio property must be a number."))return null;var l=t(r),d=s.units||"px",h=void 0!==s.aspectRatio?Number(s.aspectRatio):l.width/l.height,f=s.width,p=s.height,c=s.width,m=s.height,v=s.type||"default";a&&"default"!==v&&(i(void 0===a.width||!isNaN(a.width),"Width constraint must be a number."),i(void 0===a.height||!isNaN(a.height),"Height constraint must be a number."),v&&"cover"===v?(void 0!==a.width&&(c=Math.min(a.width,c)),void 0!==a.width&&(m=Math.min(a.height,m))):(void 0!==a.width&&(f=Math.min(a.width,f)),void 0!==a.height&&(p=Math.min(a.height,p))));var E,y;"contain"===v?(E=f>p?p*h:f,y=f>p?p:f/h,E>f?(E=f,y=E/h):y>p&&(y=p,E=y*h)):"cover"===v?(E=c>m?m*h:c,y=c>m?m:c/h,c>E?(E=c,y=E/h):m>y&&(y=m,E=y*h)):(E=f,y=p);for(var g=0;u>g;g++){var b=o[g];void 0!==s.width&&(b.style.width=String(E)+d),void 0!==s.height&&(b.style.height=String(y)+d)}var O={};return void 0!==s.width&&(O.width=E),void 0!==s.height&&(O.height=y),O}for(var w=0;u>w;w++)o[w].style.width="initial",o[w].style.height="initial";return{width:"initial",height:"initial"}}return r}),i("ui/translate",["ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i){function n(n,r,s){var a=e(n),o=i(a);if(r){if(!t(void 0===r.top||!isNaN(r.top),"Top property must be a number."))return null;if(!t(void 0===r.right||!isNaN(r.right),"Right property must be a number."))return null;if(!t(void 0===r.bottom||!isNaN(r.bottom),"Bottom property must be a number."))return null;if(!t(void 0===r.left||!isNaN(r.left),"Left property must be a number."))return null;var u=r.units||"px";if(s){if(!t(void 0===s.top||!isNaN(s.top),"Top constraint must be a number."))return null;if(!t(void 0===s.right||!isNaN(s.right),"Right constraint must be a number."))return null;if(!t(void 0===s.bottom||!isNaN(s.bottom),"Bottom constraint must be a number."))return null;if(!t(void 0===s.left||!isNaN(s.left),"Left constraint must be a number."))return null}for(var l=s&&void 0!==s.top?Math.min(r.top,s.top):r.top,d=s&&void 0!==s.right?Math.min(r.right,s.right):r.right,h=s&&void 0!==s.bottom?Math.min(r.bottom,s.bottom):r.bottom,f=s&&void 0!==s.left?Math.min(r.left,s.left):r.left,p=0;o>p;p++)void 0!==r.top&&(a[p].style.top=String(l)+u),void 0!==r.right&&(a[p].style.right=String(d)+u),void 0!==r.bottom&&(a[p].style.bottom=String(h)+u),void 0!==r.left&&(a[p].style.left=String(f)+u);var c={};return void 0!==r.top&&(c.top=l),void 0!==r.right&&(c.right=d),void 0!==r.bottom&&(c.bottom=h),void 0!==r.left&&(c.left=f),c}for(var m=0;o>m;m++)a[m].style.top="initial",a[m].style.right="initial",a[m].style.bottom="initial",a[m].style.left="initial";return{top:"initial",right:"initial",bottom:"initial",left:"initial"}}return n}),i("ui/translate3d",["ui/toElementArray","utils/assert","utils/sizeOf"],function(e,t,i){function n(n,r,s){var a=e(n),o=i(a);if(r){if(!t(void 0===r.x||!isNaN(r.x),"X property must be a number."))return null;if(!t(void 0===r.y||!isNaN(r.y),"Y property must be a number."))return null;if(!t(void 0===r.z||!isNaN(r.z),"Z property must be a number."))return null;var u=r.units||"px";if(s){if(!t(void 0===s.x||!isNaN(s.x),"X constraint must be a number."))return null;if(!t(void 0===s.y||!isNaN(s.y),"Y constraint must be a number."))return null;if(!t(void 0===s.z||!isNaN(s.z),"Z constraint must be a number."))return null}var l=s&&void 0!==s.x?Math.min(r.x,s.x):r.x,d=s&&void 0!==s.y?Math.min(r.y,s.y):r.y,h=s&&void 0!==s.z?Math.min(r.z,s.z):r.z,f=void 0!==r.x?"translateX("+l+u+")":null,p=void 0!==r.y?"translateY("+d+u+")":null,c=void 0!==r.z?"translateZ("+h+u+")":null,m="";f&&(m+=""===m?f:" "+f),p&&(m+=""===m?p:" "+p),c&&(m+=""===m?c:" "+c);for(var v=0;o>v;v++)a[v].style.transform=m;var E={};return f&&(E.x=l),p&&(E.y=d),c&&(E.z=h),E}for(var y=0;o>y;y++)a[y].style.transform="translateX(0) translateY(0) translateZ(0)";return{x:0,y:0,z:0}}return n}),i("ui",["ui/addClass","ui/changeElementState","ui/getClassIndex","ui/getElementState","ui/getIntersectRect","ui/getRect","ui/getViewportRect","ui/hasClass","ui/hasChild","ui/hitTestElement","ui/hitTestRect","ui/initDOM","ui/removeClass","ui/toElementArray","ui/transform","ui/translate","ui/translate3d","ui/Directives","ui/Element","ui/ElementUpdateDelegate","ui/Video"],function(e,t,i,n,r,s,a,o,u,l,d,h,f,p,c,m,v,E,y,g,b){var O=function(e){return e};return Object.defineProperty(O,"addClass",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(O,"changeElementState",{value:t,writable:!1,enumerable:!0}),Object.defineProperty(O,"hasClass",{value:o,writable:!1,enumerable:!0}),Object.defineProperty(O,"hasChild",{value:u,writable:!1,enumerable:!0}),Object.defineProperty(O,"getClassIndex",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(O,"getElementState",{value:n,writable:!1,enumerable:!0}),Object.defineProperty(O,"getIntersectRect",{value:r,writable:!1,enumerable:!0}),Object.defineProperty(O,"getRect",{value:s,writable:!1,enumerable:!0}),Object.defineProperty(O,"getViewportRect",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(O,"hitTestElement",{value:l,writable:!1,enumerable:!0}),Object.defineProperty(O,"hitTestRect",{value:d,writable:!1,enumerable:!0}),Object.defineProperty(O,"initDOM",{value:h,writable:!1,enumerable:!0}),Object.defineProperty(O,"removeClass",{value:f,writable:!1,enumerable:!0}),Object.defineProperty(O,"toElementArray",{value:p,writable:!1,enumerable:!0}),Object.defineProperty(O,"translate",{value:m,writable:!1,enumerable:!0}),Object.defineProperty(O,"translate3d",{value:v,writable:!1,enumerable:!0}),Object.defineProperty(O,"transform",{value:c,writable:!1,enumerable:!0}),Object.defineProperty(O,"Directives",{value:E,writable:!1,enumerable:!0}),Object.defineProperty(O,"Element",{value:y,writable:!1,enumerable:!0}),Object.defineProperty(O,"ElementUpdateDelegate",{value:g,writable:!1,enumerable:!0}),Object.defineProperty(O,"Video",{value:b,writable:!1,enumerable:!0}),O}),i("utils/module",["utils/ready"],function(e){function t(t,i){e(function(){return new t(i)})}return t}),i("utils/AssetLoader",["utils/assert","utils/log","utils/inherit","events/EventType","events/EventDispatcher"],function(e,t,i,n,r){function s(){s.__super__.constructor.apply(this,arguments)}var a=["jpg","png","svg","jpeg","gif"],o=["mp4","mpeg","ogg","ogv","mov","avi","flv"],u=["mp3","mp4","mpeg","flac","wav","ogg"],l={IMAGE:{jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg"},VIDEO:{mp4:"video/mp4",mov:"video/quicktime",mpeg:"video/mpeg",ogg:"video/ogg",ogv:"video/ogg",avi:"video/avi",flv:"video/x-flv"},AUDIO:{mp3:"audio/mpeg",mpeg:"audio/mpeg",mp4:"audio/mp4",flac:"audio/flac",ogg:"audio/ogg",wav:"audio/vnd.wave"}};return i(s,r),s.STATE={IDLE:0,IN_PROGRESS:1,COMPLETED:2,FAILED:3,ABORTED:4},s.TYPE={IMAGE:"image",VIDEO:"video",AUDIO:"audio"},s.prototype.init=function(){if(!(this.queue.length<1)){t("[AssetLoader]::init()");var e=this.queue.length;this._xhrs=[],this._pending=e;for(var i=0;e>i;i++){var n=this.queue[i];t("[AssetLoader]::Started loading: "+n.path);var r=this.getXHR({id:i,path:n.path,type:n.type});r.send(),this._xhrs.push(r)}}},s.prototype.destroy=function(){if(this._xhrs){for(var e=this._xhrs.length,t=0;e>t;t++){var i=this._xhrs[t];i.abort(),this._xhrs[t]=null}this._queue=null,this._assets=null,this._bytesLoaded=null,this._bytesTotal=null}this._state=s.STATE.IDLE},s.prototype.enqueue=function(){if(e(arguments&&arguments.length>0,"There are no arguments specified."),e(this.state!==s.STATE.IN_PROGRESS,"Enqueueing is prohibited when the state is in progress."),arguments&&!(arguments.length<=0)&&this.state!==s.STATE.IN_PROGRESS){t("[AssetLoader]::enqueue("+arguments+")");for(var i=arguments.length,n=0;i>n;n++){var r=arguments[n];e("string"==typeof r||"object"==typeof r,'Each item to be enqueued must be a string of the target path or an object containing a "path" key and/or a "type" key'),e("string"==typeof r||"string"==typeof r.path,"Invalid path specified: "+r.path+".");var l="string"==typeof r?r:r.path,d=r.type;if(!d){var h=l.split(".").pop().toLowerCase();if(a.indexOf(h)>-1)d=s.TYPE.IMAGE;else if(o.indexOf(h)>-1)d=s.TYPE.VIDEO;else{if(!(u.indexOf(h)>-1))throw"[AssetLoader]::Unsupported asset format: "+l;d=s.TYPE.AUDIO}}d&&(this.queue.push({path:l,type:d}),this._bytesLoaded||(this._bytesLoaded=[]),this._bytesTotal||(this._bytesTotal=[]),this._bytesLoaded.push(0),this._bytesTotal.push(0))}}},s.prototype.dequeue=function(){if(e(arguments&&arguments.length>0,"There are no arguments specified."),e(this.state!==s.STATE.IN_PROGRESS,"Dequeueing is prohibited when the state is in progress."),arguments&&!(arguments.length<=0)&&this.state!==s.STATE.IN_PROGRESS)for(var t=arguments.length,i=0;t>i;i++){var n=arguments[i];e("string"==typeof n,"Expecting path to be a string.");for(var r=this.queue.length,a=0;r>a;a++){var o=this.queue[a];if(o.path===n){this.queue.splice(a,1),this.bytesLoaded.splice(a,1),this.bytesTotal.splice(a,1);break}}}},s.prototype.getXHR=function(e){var t=e.path.split(".").pop().toLowerCase(),i=l[e.type.toUpperCase()][t];if(!i)throw"[AssetLoader]:: Unsupported asset format: "+e.path;var n=new XMLHttpRequest;return n.addEventListener("progress",this._onXHRProgress.bind(this),!1),n.addEventListener("load",this._onXHRLoadComplete.bind(this),!1),n.addEventListener("error",this._onXHRLoadError.bind(this),!1),n.addEventListener("abort",this._onXHRAbort.bind(this),!1),n.open("GET",e.path,this.async),n.overrideMimeType&&n.overrideMimeType(i),n.data=e,n},s.prototype._onXHRProgress=function(e){if(e.lengthComputable){var i=e.currentTarget,r=i.data.id,s=i.data.path,a=i.data.type,o=e.loaded,u=e.total;i.data.bytesLoaded=o,i.data.bytesTotal=u,this._bytesLoaded[r]=o,this._bytesTotal[r]=u,this._bytesLoaded||(this._bytesLoaded=[]),t('[AssetLoader]::_onXHRProgress("'+s+'":'+o+"/"+u+")");var l=document.createEvent("CustomEvent");l.initCustomEvent(n.OBJECT.PROGRESS,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(l)}},s.prototype._onXHRLoadComplete=function(e){var i=e.currentTarget,r=i.data.id,s=i.data.path,a=i.data.type;t('[AssetLoader]::_onXHRLoadComplete("'+s+'"")'),this._pending--;var o=document.createEvent("CustomEvent");o.initCustomEvent(n.OBJECT.LOAD,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(o)},s.prototype._onXHRLoadError=function(e){var i=e.currentTarget,r=i.data.id,s=i.data.path,a=i.data.type;t('[AssetLoader]::_onXHRLoadError("'+s+'"")'),this._pending--;var o=document.createEvent("CustomEvent");if(o.initCustomEvent(n.OBJECT.ERROR,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(o),0===this._pending){var u=document.createEvent("CustomEvent");u.initCustomEvent(n.OBJECT.LOAD,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(u)}},s.prototype._onXHRAbort=function(e){var i=e.currentTarget,r=i.data.id,s=i.data.path,a=i.data.type;t('[AssetLoader]::_onXHRLoadError("'+s+'"")'),this._pending--;var o=document.createEvent("CustomEvent");if(o.initCustomEvent(n.OBJECT.ABORT,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(o),0===this._pending){var u=document.createEvent("CustomEvent");u.initCustomEvent(n.OBJECT.LOAD,!0,!0,{id:r,path:s,type:a,pending:this._pending,loaded:this.bytesLoaded,total:this.bytesTotal}),this.dispatchEvent(u)}},s.prototype.__define_properties=function(){Object.defineProperty(this,"state",{get:function(){return this._state||Object.defineProperty(this,"_state",{value:s.STATE.IDLE,writable:!0}),this._state}}),Object.defineProperty(this,"queue",{get:function(){return this._queue||Object.defineProperty(this,"_queue",{value:[],writable:!0}),this._queue}}),Object.defineProperty(this,"assets",{get:function(){return this._assets||Object.defineProperty(this,"_assets",{value:{},writable:!0}),this._assets}}),Object.defineProperty(this,"async",{get:function(){return void 0===this._async?!0:this._async},set:function(t){e(this.state!==s.STATE.IN_PROGRESS,"Cannot change the async mode while it is in progress."),this.state!==s.STATE.IN_PROGRESS&&Object.defineProperty(this,"_async",{value:t,writable:!0})}}),Object.defineProperty(this,"bytesLoaded",{get:function(){if(this._bytesLoaded){for(var e=0,t=this._bytesLoaded.length,i=0;t>i;i++)e+=this._bytesLoaded[i];return e}return 0}}),Object.defineProperty(this,"bytesTotal",{get:function(){if(this._bytesTotal){for(var e=0,t=this._bytesTotal.length,i=0;t>i;i++)e+=this._bytesTotal[i];return e}return 0}}),Object.defineProperty(this,"progress",{get:function(){if(!this._bytesTotal||!this._bytesLoaded)return 0;if(this._bytesTotal.length!==this._bytesLoaded.length)return 0;for(var e=this._bytesTotal.length,t=0,i=0;e>i;i++){var n=this._bytesLoaded[i],r=this._bytesTotal[i];r>0&&(t+=n/r)}return t/e}}),s.__super__.__define_properties.call(this)},s}),i("utils",["utils/debounce","utils/inherit","utils/isNull","utils/keyOfValue","utils/module","utils/namespace","utils/ready","utils/sizeOf","utils/AssetLoader"],function(e,t,i,n,r,s,a,o,u){var l=function(e){return e};return Object.defineProperty(l,"debounce",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(l,"inherit",{value:t,writable:!1,enumerable:!0}),Object.defineProperty(l,"isNull",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(l,"keyOfValue",{value:n,writable:!1,enumerable:!0}),Object.defineProperty(l,"module",{value:r,writable:!1,enumerable:!0}),Object.defineProperty(l,"namespace",{value:s,writable:!1,enumerable:!0}),Object.defineProperty(l,"ready",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(l,"sizeOf",{value:o,writable:!1,enumerable:!0}),Object.defineProperty(l,"AssetLoader",{value:u,writable:!1,enumerable:!0}),l}),i("vars",["enums","events","math","ui","utils"],function(e,t,i,n,r){function s(e,t){Object.defineProperty(a,e,{value:t,writable:!1});for(var i in t)t.hasOwnProperty(i)&&Object.defineProperty(a,i,{value:t[i],writable:!1})}var a=function(e){return e};return Object.defineProperty(a,"version",{value:"1.0.0",writable:!1}),s("enums",e),s("events",t),s("math",i),s("ui",n),s("utils",r),a}),t("vars")}());